<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actuality - DFM Media</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-dark: #1a1814;
            --primary-accent: #D4AF37;
            --secondary-dark: #2d2b24;
            --light-bg: #F8F5F0;
            --card-bg: #ffffff;
            --text-primary: #1a1814;
            --text-secondary: #333333;
            --border-light: #e5e7eb;
            --glass-bg: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(255, 255, 255, 0.2);
            --box-text-color: #1a1814;
        }
        
        [data-theme="dark"] {
            --light-bg: #121212;
            --card-bg: #1a1a1a;
            --text-primary: #D4AF37;
            --text-secondary: #ffffff;
            --border-light: #333333;
            --glass-bg: rgba(26, 24, 20, 0.9);
            --glass-border: rgba(212, 175, 55, 0.1);
            --box-text-color: #f8f3c9;
        }
        
        * {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--light-bg);
            color: var(--text-secondary);
            line-height: 1.7;
        }
        
        .theme-toggle {
            position: relative;
            width: 50px;
            height: 26px;
            background: var(--secondary-dark);
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: 3px;
            margin-left: 15px;
        }
        
        .theme-toggle-handle {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--primary-accent);
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        [data-theme="dark"] .theme-toggle-handle {
            transform: translateX(24px);
        }
        
        .theme-toggle i {
            font-size: 12px;
            z-index: 1;
            color: var(--primary-dark);
        }
        
        .theme-toggle .fa-sun {
            margin-right: auto;
            padding-left: 4px;
        }
        
        .theme-toggle .fa-moon {
            margin-left: auto;
            padding-right: 4px;
        }
        
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
        }
        
        header { 
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            color: white;
            box-shadow: 0 4px 32px rgba(26, 24, 20, 0.3);
            backdrop-filter: blur(10px);
        }
        
        header .navbar-brand { 
            font-weight: 800;
            font-size: 2rem;
            letter-spacing: -0.025em;
            background: linear-gradient(90deg, var(--primary-accent), #fff 80%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .Logo {
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            padding-left: 5px;
            padding-right: 5px;
        }
        
        .navbar-nav .nav-link {
            position: relative;
            margin: 0 8px;
            font-weight: 500;
            font-size: 0.95rem;
            padding: 12px 16px !important;
            border-radius: 10px;
            color: rgba(255, 255, 255, 0.8) !important;
        }
        
        .navbar-nav .nav-link::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: linear-gradient(45deg, var(--primary-accent), rgba(212, 175, 55, 0.6));
            border-radius: 10px;
            transform: translate(-50%, -50%);
            z-index: -1;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .navbar-nav .nav-link:hover::before,
        .navbar-nav .nav-link.active::before {
            width: 100%;
            height: 100%;
        }
        
        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link.active {
            color: var(--primary-dark) !important;
            transform: translateY(-2px);
        }
        
        .breaking-news { 
            padding: 16px 0;
            overflow: hidden;
            position: relative;
            background: linear-gradient(270deg, var(--primary-accent), #f8e14d, var(--primary-accent));
            background-size: 200% 200%;
            animation: gradientShift 4s ease infinite;
            color: var(--primary-dark); 
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .breaking-news::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .breaking-news span {
            flex-shrink: 0;
            padding: 8px 16px;
            font-size: 0.9rem;
            background: var(--primary-dark);
            color: var(--primary-accent);
            border-radius: 20px;
            font-weight: 700;
            margin-right: 20px;
            display: inline-block;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .marquee-container {
            overflow: hidden;
            flex: 1;
        }
        
        .marquee {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 20s linear infinite;
            font-weight: 700;
            font-size: 0.85rem;
            white-space: nowrap;
            color: var(--primary-dark);
        }
        
        @keyframes marquee {
            0%   { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        .news-card { 
            border: none; 
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            background: var(--card-bg);
            position: relative;
            color: var(--text-secondary);
        }
        
        .news-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 20px;
            padding: 2px;
            background: linear-gradient(45deg, transparent, var(--primary-accent), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .news-card:hover::before {
            opacity: 1;
            animation: borderGlow 2s infinite;
        }
        
        @keyframes borderGlow {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        
        .news-card:hover { 
            transform: translateY(-8px) scale(1.02); 
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .news-card img { 
            height: 220px; 
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .news-card:hover img {
            transform: scale(1.1);
        }
        
        .news-card .card-title { 
            color: var(--text-primary);
            font-weight: 700;
            font-size: 1.1rem;
            line-height: 1.4;
        }
        
        .card-overlay {
            position: absolute;
            top: 16px;
            right: 16px;
            background: var(--primary-accent);
            color: var(--primary-dark);
            padding: 6px 14px;
            border-radius: 25px;
            font-size: 0.8rem;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
            backdrop-filter: blur(10px);
        }
        
        .section-header {
            position: relative;
            margin-bottom: 40px;
            padding-bottom: 16px;
            font-weight: 800;
            font-size: 1.75rem;
            color: var(--text-primary);
        }
        
        .section-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-accent), rgba(212, 175, 55, 0.3));
            border-radius: 2px;
        }
        
        .live-player { 
            background: linear-gradient(135deg, var(--secondary-dark) 0%, var(--primary-dark) 100%);
            color: var(--primary-accent);
            padding: 20px;
            text-align: center;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 -8px 32px rgba(0,0,0,0.2);
            position: relative;
        }
        
        .live-player::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-accent), #f8e14d, var(--primary-accent));
            background-size: 200% 100%;
            animation: gradientMove 3s linear infinite;
        }
        
        @keyframes gradientMove {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        .play-btn {
            background: var(--primary-accent);
            color: var(--primary-dark);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 0 20px;
            font-size: 1.2rem;
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.3);
        }
        
        .play-btn:hover {
            transform: scale(1.1);
        }
        
        footer { 
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            color: var(--primary-accent);
            padding: 50px 0 30px;
        }
        
        .social-icons a {
            color: var(--primary-accent) !important;
            font-size: 1.6rem;
            margin: 0 10px;
            transition: color 0.3s;
        }
        
        .social-icons a:hover {
            color: #fff200 !important;
        }
        
        .program-card {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            height: 100%;
        }
        
        .program-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .program-time {
            background: var(--primary-accent);
            color: var(--primary-dark);
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .economy-summary {
            background: linear-gradient(135deg, var(--primary-dark), var(--secondary-dark));
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
        }
        
        .economy-indicator {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .indicator-value {
            font-weight: 700;
            color: var(--primary-accent);
        }
        
        .hot-news-ticker {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .comment-block {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }
        
        .comment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 15px;
        }
        
        .visually-hidden {
            position: absolute !important;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-card {
            animation: fadeInUp 0.6s ease forwards;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="sticky-top">
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img class="Logo" src="Logo.png" alt="DFM Media Logo" width="70" height="70" class="d-inline-block align-text-top me-2">
                    <i class="fas fa-microphone-alt me-2"></i>DFM MEDIA
                </a>
                
                <div class="search-container d-none d-lg-block">
                    <i class="fas fa-search search-icon"></i>
                    <input type="search" class="search-input" placeholder="Search news...">
                </div>
                
                <div class="d-flex align-items-center">
                    <div class="theme-toggle" id="themeToggle">
                        <i class="fas fa-sun"></i>
                        <i class="fas fa-moon"></i>
                        <div class="theme-toggle-handle"></div>
                    </div>
                    
                    <button class="audio-control" id="playButton">
                        <i class="fas fa-play"></i>
                        <span class="visually-hidden">Play</span>
                    </button>
                    <button class="audio-control" id="stopButton">
                        <i class="fas fa-stop"></i>
                        <span class="visually-hidden">Stop</span>
                    </button>
                    
                    <button class="navbar-toggler ms-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
                
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="index.html"><i class="fas fa-home me-1"></i> Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="emmsion.html"><i class="fas fa-broadcast-tower me-1"></i> Emission</a></li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="economyDropdown" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-chart-line me-1"></i> Economy
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">Economy</a></li>
                                <li><a class="dropdown-item" href="#">Eco Africa</a></li>
                                <li><a class="dropdown-item" href="#">Eco Agriculture</a></li>
                                <li><a class="dropdown-item" href="#">Eco Innovation</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="financeDropdown" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-coins me-1"></i> Finance
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="finance.html">Finance Market</a></li>
                                <li><a class="dropdown-item" href="finance.html#budget">National Budget</a></li>
                                <li><a class="dropdown-item" href="finance.html#banking">Banking Projects</a></li>
                                <li><a class="dropdown-item" href="finance.html#statistics">Daily Statistics</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="articlesDropdown" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-newspaper me-1"></i> Articles
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="articles.html">Articles</a></li>
                                <li><a class="dropdown-item" href="articles.html#newsletter">Newsletter</a></li>
                                <li><a class="dropdown-item" href="articles.html#blog">Blog</a></li>
                            </ul>
                        </li>
                        <li class="nav-item"><a class="nav-link active" href="#"><i class="fas fa-bullhorn me-1"></i> Actuality</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Breaking News Ticker -->
    <div class="breaking-news">
        <div class="container d-flex align-items-center">
            <span><i class="fas fa-bolt me-2"></i>BREAKING NEWS</span>
            <div class="marquee-container w-100">
                <div class="marquee" id="breakingNewsTicker">
                    Loading breaking news...
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container my-5">
        <!-- Our Channel Programs -->
        <section aria-labelledby="our-programs" class="mb-5">
            <h2 class="section-header" id="our-programs">Our Channel Programs</h2>
            <div class="row" id="programsContainer">
                <!-- Programs will be loaded here by JavaScript -->
                <div class="col-12 text-center">
                    <div class="spinner-border text-warning" role="status">
                        <span class="visually-hidden">Loading programs...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Future Programs -->
        <section aria-labelledby="future-programs" class="mb-5">
            <h2 class="section-header" id="future-programs">Future Programs</h2>
            <div class="row" id="futureProgramsContainer">
                <!-- Future programs will be loaded here by JavaScript -->
                <div class="col-12 text-center">
                    <div class="spinner-border text-warning" role="status">
                        <span class="visually-hidden">Loading future programs...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upcoming Programs -->
        <section aria-labelledby="upcoming-programs" class="mb-5">
            <h2 class="section-header" id="upcoming-programs">Upcoming Programs</h2>
            <div id="upcomingProgramsContainer">
                <!-- Upcoming programs will be loaded here by JavaScript -->
                <div class="text-center">
                    <div class="spinner-border text-warning" role="status">
                        <span class="visually-hidden">Loading upcoming programs...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Economy Activities Summary -->
        <section aria-labelledby="economy-summary" class="mb-5">
            <h2 class="section-header" id="economy-summary">Economy Activities Summary</h2>
            <div id="economySummaryContainer">
                <!-- Economy summary will be loaded here by JavaScript -->
                <div class="text-center">
                    <div class="spinner-border text-warning" role="status">
                        <span class="visually-hidden">Loading economy summary...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Hot Current News -->
        <section aria-labelledby="hot-news" class="mb-5">
            <h2 class="section-header" id="hot-news">Hot Current News</h2>
            <div id="hotNewsContainer">
                <!-- Hot news will be loaded here by JavaScript -->
                <div class="text-center">
                    <div class="spinner-border text-warning" role="status">
                        <span class="visually-hidden">Loading hot news...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Subscriber Comments -->
        <section aria-labelledby="subscriber-comments" class="mb-5">
            <h2 class="section-header" id="subscriber-comments">Subscriber Comments</h2>
            <div class="row" id="commentsContainer">
                <!-- Comments will be loaded here by JavaScript -->
                <div class="col-12 text-center">
                    <div class="spinner-border text-warning" role="status">
                        <span class="visually-hidden">Loading comments...</span>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-4">
                <a href="#" class="btn btn-warning">View More Comments</a>
            </div>
        </section>

        <!-- Radio Player Section -->
        <section aria-labelledby="radio-player" class="my-5">
            <h2 class="section-header" id="radio-player">Live Actuality Discussion</h2>
            <div class="card news-card text-center p-4">
                <h3 class="mb-4">Now Playing: Current Affairs Discussion</h3>
                <div class="player-controls d-flex justify-content-center align-items-center">
                    <button class="play-btn me-3" id="radioPlay">
                        <i class="fas fa-play"></i>
                        <span class="visually-hidden">Play</span>
                    </button>
                    <button class="play-btn me-3" id="radioStop">
                        <i class="fas fa-stop"></i>
                        <span class="visually-hidden">Stop</span>
                    </button>
                    <div class="ms-3">
                        <span id="nowPlayingText">Live: Analysis of current economic news and trends</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Live Radio Player Footer -->
    <div class="live-player">
        <div class="container d-flex justify-content-between align-items-center">
            <span>üéôÔ∏è Listen to DFM Actuality Discussion Live</span>
            <div>
                <button class="play-btn me-2" id="footerPlay">
                    <i class="fas fa-play"></i>
                    <span class="visually-hidden">Play</span>
                </button>
                <button class="play-btn" id="footerStop">
                    <i class="fas fa-stop"></i>
                    <span class="visually-hidden">Stop</span>
                </button>
            </div>
            <span>Live: Current affairs and economic analysis</span>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center p-4">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5>DFM Media Actuality</h5>
                    <p>Stay updated with the latest news, programs, and economic developments.</p>
                </div>
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5>Connect With Us</h5>
                    <div class="social-icons">
                        <a href="https://www.facebook.com/dfmradio103.9mhz" title="Facebook" target="_blank">
                            <i class="fab fa-facebook-f"></i>
                            <span class="visually-hidden">Facebook</span>
                        </a>
                        <a href="https://whatsapp.com/channel/0029VacCrV7BadmgUIyluG2g" title="WhatsApp" target="_blank">
                            <i class="fab fa-whatsapp"></i>
                            <span class="visually-hidden">WhatsApp</span>
                        </a>
                        <a href="https://cm.linkedin.com/company/dfm-radio-103-9-mhz#" title="LinkedIn" target="_blank">
                            <i class="fab fa-linkedin-in"></i>
                            <span class="visually-hidden">LinkedIn</span>
                        </a>
                        <a href="#" title="Phone">
                            <i class="fas fa-phone"></i>
                            <span class="visually-hidden">Phone</span>
                        </a>
                    </div>
                </div>
                <div class="col-md-4">
                    <h5>Contact</h5>
                    <address>
                        DFM Media Actuality Desk<br>
                        Cameroon<br>
                        <i class="fas fa-envelope me-2"></i> actuality@dfmmedia.cm<br>
                        <i class="fas fa-phone me-2"></i> +237 650 155 155
                    </address>
                </div>
            </div>
            <hr class="my-4">
            <p class="mb-0">&copy; 2025 DFM Media Actuality ‚Äì All rights reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // DFM Actuality Application
        class DFMActualityApp {
            constructor() {
                this.API_BASE = 'http://localhost:5000/api';
                this.audioPlayer = null;
                this.currentTheme = localStorage.getItem('theme') || 'light';
                this.init();
            }

            init() {
                this.initTheme();
                this.initAudioPlayer();
                this.loadAllData();
                this.setupEventListeners();
            }

            // Theme Management
            initTheme() {
                this.applyTheme(this.currentTheme);
                document.getElementById('themeToggle').addEventListener('click', () => this.toggleTheme());
            }

            applyTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
            }

            toggleTheme() {
                this.currentTheme = this.currentTheme === 'light' ? 'dark' : 'light';
                this.applyTheme(this.currentTheme);
            }

            // Audio Player Management
            initAudioPlayer() {
                const STREAM_URL = "http://streaming.shoutcast.com/dfm-radio";
                this.audioPlayer = new Audio(STREAM_URL);
                this.audioPlayer.preload = "none";
                this.audioPlayer.crossOrigin = "anonymous";
                this.isPlaying = false;

                // Connect all play buttons
                const playButtons = ['playButton', 'radioPlay', 'footerPlay'];
                const stopButtons = ['stopButton', 'radioStop', 'footerStop'];

                playButtons.forEach(id => {
                    const btn = document.getElementById(id);
                    if (btn) btn.addEventListener('click', () => this.togglePlayback());
                });

                stopButtons.forEach(id => {
                    const btn = document.getElementById(id);
                    if (btn) btn.addEventListener('click', () => this.stopPlayback());
                });

                this.audioPlayer.addEventListener('error', (e) => {
                    console.error('Audio player error:', e);
                    this.showNotification('Error playing stream. Please check your connection.', 'error');
                    this.stopPlayback();
                });
            }

            async togglePlayback() {
                try {
                    if (!this.isPlaying) {
                        await this.audioPlayer.play();
                        this.isPlaying = true;
                        this.updatePlaybackUI(true);
                    } else {
                        this.audioPlayer.pause();
                        this.isPlaying = false;
                        this.updatePlaybackUI(false);
                    }
                } catch (error) {
                    console.error('Playback error:', error);
                    this.showNotification('Unable to play stream. Please check your connection.', 'error');
                }
            }

            stopPlayback() {
                this.audioPlayer.pause();
                this.audioPlayer.currentTime = 0;
                this.isPlaying = false;
                this.updatePlaybackUI(false);
            }

            updatePlaybackUI(playing) {
                const playIcons = document.querySelectorAll('.fa-play, .fa-pause');
                playIcons.forEach(icon => {
                    if (playing) {
                        icon.classList.replace('fa-play', 'fa-pause');
                    } else {
                        icon.classList.replace('fa-pause', 'fa-play');
                    }
                });
            }

            // Data Loading
            async loadAllData() {
                try {
                    await Promise.all([
                        this.loadBreakingNews(),
                        this.loadPrograms(),
                        this.loadUpcomingPrograms(),
                        this.loadFuturePrograms(),
                        this.loadEconomySummary(),
                        this.loadHotNews(),
                        this.loadComments()
                    ]);
                } catch (error) {
                    console.error('Error loading data:', error);
                    this.showNotification('Failed to load some content. Please refresh the page.', 'warning');
                }
            }

            async fetchData(endpoint) {
                try {
                    const response = await fetch(`${this.API_BASE}${endpoint}`);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return await response.json();
                } catch (error) {
                    console.error(`API Error for ${endpoint}:`, error);
                    throw error;
                }
            }

            async loadBreakingNews() {
                try {
                    // This would typically come from your hot-news endpoint
                    const data = await this.fetchData('/actuality/hot-news');
                    const newsItems = data.hotNews || [];
                    const breakingNews = newsItems.slice(0, 3).map(item => item.title).join(' | ') || 
                                        'Stay tuned for the latest news updates from DFM Media';
                    
                    document.getElementById('breakingNewsTicker').textContent = breakingNews;
                } catch (error) {
                    document.getElementById('breakingNewsTicker').textContent = 
                        'Latest news and updates from DFM Media - Stay informed';
                }
            }

            async loadPrograms() {
                try {
                    const data = await this.fetchData('/actuality/programs');
                    this.renderPrograms(data.programs || []);
                } catch (error) {
                    this.showError('programsContainer', 'Unable to load programs');
                }
            }

            async loadUpcomingPrograms() {
                try {
                    const data = await this.fetchData('/actuality/programs/upcoming');
                    this.renderUpcomingPrograms(data.programs || []);
                } catch (error) {
                    this.showError('upcomingProgramsContainer', 'Unable to load upcoming programs');
                }
            }

            async loadFuturePrograms() {
                try {
                    const data = await this.fetchData('/actuality/programs/future');
                    this.renderFuturePrograms(data.programs || []);
                } catch (error) {
                    this.showError('futureProgramsContainer', 'Unable to load future programs');
                }
            }

            async loadEconomySummary() {
                try {
                    const data = await this.fetchData('/actuality/economy-summary');
                    this.renderEconomySummary(data.summary || {});
                } catch (error) {
                    this.showError('economySummaryContainer', 'Unable to load economy summary');
                }
            }

            async loadHotNews() {
                try {
                    const data = await this.fetchData('/actuality/hot-news');
                    this.renderHotNews(data.hotNews || []);
                } catch (error) {
                    this.showError('hotNewsContainer', 'Unable to load hot news');
                }
            }

            async loadComments() {
                try {
                    const data = await this.fetchData('/actuality/comments');
                    this.renderComments(data.comments || []);
                } catch (error) {
                    this.showError('commentsContainer', 'Unable to load comments');
                }
            }

            // Rendering Methods
            renderPrograms(programs) {
                const container = document.getElementById('programsContainer');
                if (!programs.length) {
                    container.innerHTML = this.getNoDataMessage('No programs available at the moment');
                    return;
                }

                container.innerHTML = programs.map((program, index) => `
                    <div class="col-md-4 mb-4 animate-card" style="animation-delay: ${index * 0.1}s">
                        <div class="card program-card">
                            <img src="${program.image || this.getDefaultImage('program')}" 
                                 class="card-img-top" alt="${program.title}" loading="lazy">
                            <div class="card-body">
                                <span class="program-time">${program.schedule || 'Check schedule'}</span>
                                <h5 class="card-title">${program.title}</h5>
                                <p class="program-host">${program.host ? `Hosted by ${program.host}` : 'DFM Media Team'}</p>
                                <p class="program-description">${program.description || 'Join us for insightful discussions and analysis.'}</p>
                                <a href="#" class="btn btn-sm btn-warning">Set Reminder</a>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            renderUpcomingPrograms(programs) {
                const container = document.getElementById('upcomingProgramsContainer');
                if (!programs.length) {
                    container.innerHTML = this.getNoDataMessage('No upcoming programs scheduled');
                    return;
                }

                container.innerHTML = programs.map(program => `
                    <div class="card news-card mb-4">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="bg-warning rounded-circle p-3 me-3">
                                            <i class="fas fa-calendar-alt"></i>
                                        </div>
                                        <div>
                                            <h5 class="mb-0">${program.title}</h5>
                                            <p class="mb-0 text-muted">${this.formatDate(program.startDate)} | ${program.time || 'Time TBA'}</p>
                                        </div>
                                    </div>
                                    <p class="mb-3">${program.description}</p>
                                    <a href="#" class="btn btn-warning">Add to Calendar</a>
                                </div>
                                ${program.speakers ? `
                                <div class="col-md-6">
                                    <h6>Featured Speakers:</h6>
                                    <p class="text-muted">${program.speakers}</p>
                                </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            renderFuturePrograms(programs) {
                const container = document.getElementById('futureProgramsContainer');
                if (!programs.length) {
                    container.innerHTML = this.getNoDataMessage('No future programs announced');
                    return;
                }

                container.innerHTML = programs.map((program, index) => `
                    <div class="col-md-6 mb-4 animate-card" style="animation-delay: ${index * 0.1}s">
                        <div class="card news-card">
                            <div class="card-body">
                                <span class="badge bg-info mb-2">${program.status || 'Coming Soon'}</span>
                                <h5 class="card-title">${program.title}</h5>
                                <p class="card-text">${program.description}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">
                                        ${program.premiereDate ? `Premieres: ${this.formatDate(program.premiereDate)}` : 'Launching Soon'}
                                    </small>
                                    <a href="#" class="btn btn-sm btn-outline-warning">Learn More</a>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            renderEconomySummary(summary) {
                const container = document.getElementById('economySummaryContainer');
                const defaultData = {
                    stockMarket: '+0.0%',
                    inflation: '0.0%',
                    currency: 'Loading...',
                    businessRegistrations: '+0%',
                    agriculture: '+0%'
                };

                const data = { ...defaultData, ...summary };

                container.innerHTML = `
                    <div class="economy-summary">
                        <h4 class="mb-4">This Week in Economy</h4>
                        <div class="economy-indicator">
                            <span>Stock Market Performance</span>
                            <span class="indicator-value">${data.stockMarket}</span>
                        </div>
                        <div class="economy-indicator">
                            <span>Inflation Rate</span>
                            <span class="indicator-value">${data.inflation}</span>
                        </div>
                        <div class="economy-indicator">
                            <span>Currency Stability (FCFA/USD)</span>
                            <span class="indicator-value">${data.currency}</span>
                        </div>
                        <div class="economy-indicator">
                            <span>New Business Registrations</span>
                            <span class="indicator-value">${data.businessRegistrations}</span>
                        </div>
                        <div class="economy-indicator">
                            <span>Agricultural Production</span>
                            <span class="indicator-value">${data.agriculture}</span>
                        </div>
                        <div class="text-center mt-4">
                            <a href="#" class="btn btn-outline-warning">View Detailed Report</a>
                        </div>
                    </div>
                `;
            }

            renderHotNews(hotNews) {
                const container = document.getElementById('hotNewsContainer');
                if (!hotNews.length) {
                    container.innerHTML = this.getNoDataMessage('No hot news available');
                    return;
                }

                const mainNews = hotNews[0];
                const otherNews = hotNews.slice(1, 3);

                container.innerHTML = `
                    <div class="hot-news-ticker">
                        <h4><i class="fas fa-fire me-2"></i>${mainNews.title}</h4>
                        <p>${mainNews.content}</p>
                        <a href="#" class="text-white">Read Full Story <i class="fas fa-arrow-right ms-1"></i></a>
                    </div>
                    <div class="row mt-4">
                        ${otherNews.map((news, index) => `
                            <div class="col-md-6 mb-4 animate-card" style="animation-delay: ${index * 0.2}s">
                                <div class="card news-card">
                                    <img src="${news.image || this.getDefaultImage('news')}" 
                                         class="card-img-top" alt="${news.title}" loading="lazy">
                                    <div class="card-body">
                                        <span class="badge bg-danger mb-2">Hot Topic</span>
                                        <h5 class="card-title">${news.title}</h5>
                                        <p class="card-text">${news.content.substring(0, 120)}...</p>
                                        <a href="#" class="btn btn-sm btn-outline-warning">Read More</a>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            renderComments(comments) {
                const container = document.getElementById('commentsContainer');
                if (!comments.length) {
                    container.innerHTML = this.getNoDataMessage('No comments yet');
                    return;
                }

                container.innerHTML = comments.map((comment, index) => `
                    <div class="col-md-6 mb-4 animate-card" style="animation-delay: ${index * 0.1}s">
                        <div class="comment-block">
                            <div class="comment-user d-flex align-items-center">
                                <img src="${comment.user?.avatar || this.getDefaultAvatar()}" 
                                     alt="${comment.user?.name || 'User'}" class="comment-avatar" loading="lazy">
                                <div>
                                    <h6 class="mb-0">${comment.user?.name || 'Anonymous'}</h6>
                                    <small class="text-muted">${this.formatTimeAgo(comment.createdAt)}</small>
                                </div>
                            </div>
                            <div class="comment-content mt-3">
                                <p class="mb-2">"${comment.content}"</p>
                                ${comment.articleTitle ? `
                                    <small class="text-muted">
                                        <i class="fas fa-newspaper me-1"></i>On: ${comment.articleTitle}
                                    </small>
                                ` : ''}
                            </div>
                            <div class="d-flex justify-content-between mt-3">
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-thumbs-up me-1"></i> ${comment.likes || 0}
                                </button>
                                <button class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-reply me-1"></i> Reply
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            // Utility Methods
            formatDate(dateString) {
                if (!dateString) return 'Date TBA';
                try {
                    const date = new Date(dateString);
                    return date.toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    });
                } catch (error) {
                    return 'Invalid Date';
                }
            }

            formatTimeAgo(dateString) {
                if (!dateString) return 'Recently';
                try {
                    const date = new Date(dateString);
                    const now = new Date();
                    const diffMs = now - date;
                    const diffMins = Math.floor(diffMs / 60000);
                    const diffHours = Math.floor(diffMs / 3600000);
                    const diffDays = Math.floor(diffMs / 86400000);

                    if (diffMins < 1) return 'just now';
                    if (diffMins < 60) return `${diffMins} minute${diffMins > 1 ? 's' : ''} ago`;
                    if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
                    if (diffDays < 7) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;
                    
                    return this.formatDate(dateString);
                } catch (error) {
                    return 'Unknown time';
                }
            }

            getDefaultImage(type) {
                const images = {
                    program: 'https://images.unsplash.com/photo-1589652717521-10c0d092dea9?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300&q=80',
                    news: 'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300&q=80'
                };
                return images[type] || images.news;
            }

            getDefaultAvatar() {
                return 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80';
            }

            getNoDataMessage(message) {
                return `
                    <div class="col-12 text-center text-muted py-5">
                        <i class="fas fa-inbox fa-3x mb-3"></i>
                        <p class="mb-0">${message}</p>
                    </div>
                `;
            }

            showError(containerId, message) {
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = `
                        <div class="col-12 text-center text-danger py-4">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            ${message}
                        </div>
                    `;
                }
            }

            showNotification(message, type = 'info') {
                // Simple notification implementation
                console.log(`${type.toUpperCase()}: ${message}`);
                // You can implement a proper notification system here
            }

            setupEventListeners() {
                // Auto-refresh data every 5 minutes
                setInterval(() => {
                    this.loadAllData();
                }, 300000);

                // Search functionality
                const searchInput = document.querySelector('.search-input');
                if (searchInput) {
                    searchInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            this.handleSearch(e.target.value);
                        }
                    });
                }
            }

            handleSearch(query) {
                if (query.trim()) {
                    // Implement search functionality
                    console.log('Searching for:', query);
                    this.showNotification(`Searching for "${query}"`, 'info');
                }
            }
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            window.dfmApp = new DFMActualityApp();
        });
    </script>
</body>
</html>